<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="/public/css/main.css">
  <title>Designer and Streetwear Marketplace</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" type="text/javascript"></script>
</head>
<div class="title">
  <a href="/" class="link" style="text-decoration:none"><h1>Designer and Streetwear Marketplace</h1></a>
</div>
<div>
  <input id="searchbar" onkeyup="search_listing()" type="text" name="search" placeholder="Search" style="float:right;">
  <script type="text/javascript">
    function search_listing() {
      let input = document.getElementById('searchbar').value
      input = input.toLowerCase();
      let x = document.getElementsByClassName('listing');
      console.log(x);
      for (i = 0; i < x.length; i++) {
        console.log(x[i].firstElementChild.innerHTML.toLowerCase().includes(input));
        if (!x[i].firstElementChild.innerHTML.toLowerCase().includes(input)) {
          x[i].style.display = "none";
        } else {
          x[i].style.display = "list-item";
        }
      }

      {{!-- var allHidden = true;
      for (i = 0; i < x.length; i++) {
        if (window.getComputedStyle(x[i]).visibility === "visible" || allHidden == false) {
          allHidden = false;
        } else {
          allHidden = true;
        }
      }

      console.log("allHidden: " + allHidden);
      if (allHidden) {
        var text = document.createTextNode("We couldn't find any listings for your search :(")
        document.getElementById("listings").appendChild(text);
      } --}}
    } 
  </script>
</div>

<body>
  <div class="container">
    {{>nav}}
    <div id="listings">
      {{{body}}}
    </div>
  </div>
</body>

<footer>
  {{#if tags}}
    <div class="tags">
        {{#each tags}}
        <a href="/tag/{{this}}" class="tag">{{this}}</a>
        {{/each}}
    </div>
    {{/if}}
</footer>
</html>